---
description: Architectural reference for AssetPath
---

# AssetPath

**Package:** com.hypixel.hytale.builtin.asseteditor
**Type:** Value Object

## Definition
```java
// Signature
public record AssetPath(@Nonnull String packId, @Nonnull Path path) {
```

## Architecture & Concepts
The AssetPath record is a fundamental value object that serves as a strongly-typed, canonical identifier for a single asset within the Hytale engine. It encapsulates the two components required to uniquely locate any asset: a **packId** that acts as a namespace (e.g., a core game pack or a mod), and a relative **path** to the resource within that pack.

Architecturally, its primary role is to act as a Data Transfer Object (DTO) and a stable identifier, bridging the gap between different engine subsystems. It decouples the network protocol representation of an asset location from the internal representation used by the AssetManager and other game systems. By replacing primitive string-based lookups, it enhances type safety, reduces ambiguity, and prevents a class of common path-related errors.

The use of a Java record makes it an immutable data carrier, which is a critical design choice for an object that is passed extensively throughout the system.

### Lifecycle & Ownership
- **Creation:** AssetPath instances are ephemeral and created on-demand. They are typically instantiated in one of two scenarios:
    1. Deserialization from a network message via the `AssetPath(com.hypixel.hytale.protocol.packets.asseteditor.AssetPath)` constructor.
    2. Programmatic creation by game systems, such as the asset editor UI, when a specific asset needs to be referenced.
- **Scope:** The lifetime of an AssetPath instance is short and bound to the scope of the operation that requires it, such as a single asset load request or a network event handler. They are not intended to be long-lived, managed objects.
- **Destruction:** As a lightweight, immutable record, instances are managed entirely by the Java Garbage Collector and are cheap to create and destroy. No manual resource management is required.

## Internal State & Concurrency
- **State:** The AssetPath record is **inherently immutable**. Its fields, packId and path, are final and cannot be modified after instantiation. This guarantees that an AssetPath instance represents a consistent, unchanging asset reference. The static `EMPTY_PATH` provides a canonical representation for a null or uninitialized state.
- **Thread Safety:** Due to its immutability, AssetPath is **inherently thread-safe**. Instances can be safely shared and passed between threads without any risk of data corruption or the need for external synchronization mechanisms like locks. This is a crucial property for a high-performance, multi-threaded game engine.

## API Surface
The public contract is minimal, focusing on data transport and representation. Accessors for packId and path are implicitly generated by the record.

| Symbol | Type | Complexity | Description |
| :--- | :--- | :--- | :--- |
| AssetPath(packet) | constructor | O(1) | Deserializes a network packet into a domain-specific AssetPath. This is the primary entry point from the network layer. |
| toPacket() | Packet | O(1) | Serializes the AssetPath into its network packet representation for transmission. This is the primary exit point to the network layer. |

## Integration Patterns

### Standard Usage
AssetPath should be used as the standard identifier when interacting with any system that manages assets. It is passed as a parameter to request, modify, or reference a resource.

```java
// Example: Requesting an asset from an AssetService
AssetPath textureToLoad = new AssetPath("hytale_core", Path.of("textures/blocks/stone.png"));
AssetHandle<Texture> handle = assetService.loadAsset(textureToLoad);

// Example: Converting to a packet to send over the network
com.hypixel.hytale.protocol.packets.asseteditor.AssetPath packet = textureToLoad.toPacket();
networkManager.send(packet);
```

### Anti-Patterns (Do NOT do this)
- **String Decomposition:** Do not deconstruct an AssetPath into its constituent strings for logic or storage. Pass the AssetPath object itself to maintain type safety and context.
- **Null Usage:** Avoid using `null` to represent an empty or invalid path. The provided static constant `AssetPath.EMPTY_PATH` should be used instead. This prevents NullPointerExceptions and provides a clear, intentional representation of an empty state.
- **Path Normalization:** Do not attempt to manually normalize or manipulate the internal Path object. The engine's internal systems, such as PathUtil, are responsible for handling platform-specific path representations.

## Data Pipeline
AssetPath is a key component in the data flow between the network, the game client, and the server, acting as a translator between protocol-level data and engine-level identifiers.

> **Inbound Flow (e.g., Server tells client to open an asset):**
> Network Packet -> Packet Decoder -> `new AssetPath(packet)` -> **AssetPath Instance** -> Asset Editor Service -> UI Update

> **Outbound Flow (e.g., Client saves an asset):**
> UI Interaction -> **AssetPath Instance** Creation -> `assetPath.toPacket()` -> Packet Encoder -> Network Transmission

